<!doctype html><html lang=en-us><head><title>Desktop Application Filesystem Environments // Notes of bvfnbk</title><link rel="shortcut icon" href=/favicon.ico><meta charset=utf-8><meta name=generator content="Hugo 0.113.0"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=author content="bvfnbk"><meta name=description content><link rel=stylesheet href=https://bvfnbk.github.io/css/main.min.643edd862b12f1964ab47ccc8e9fc249b31e947d123dc806b0d1aa1e3aaa6325.css></head><body><header class=side-navigation><a href=https://bvfnbk.github.io/><img class=avatar src=/avatar.png alt=bvfnbk></a><h1>Notes of bvfnbk</h1><nav class=menu><a class=item href=/>Home</a>
/
<a class=item href=/tags/>Tags</a>
/
<a class=item href=/about/>About</a></nav><p>Software development and other stuff.</p><div class=social><a href=https://github.com/bvfnbk target=_blank rel="noreferrer noopener"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-github"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37.0 00-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44.0 0020 4.77 5.07 5.07.0 0019.91 1S18.73.65 16 2.48a13.38 13.38.0 00-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07.0 005 4.77 5.44 5.44.0 003.5 8.55c0 5.42 3.3 6.61 6.44 7A3.37 3.37.0 009 18.13V22"/></svg></a></div></header><main class=main><article class=post><header class=header><h1 class=title>Desktop Application Filesystem Environments</h1><div class=meta><div><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-calendar"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/></svg>Oct 25, 2022</div><div><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-clock"><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg>6 min read</div></div></header><div class=content><p>An application typically manages a specific set of directories and files. The base directories can be categorized by the
following table:</p><table><thead><tr><th>Directory</th><th>Purpose</th><th>Comment</th></tr></thead><tbody><tr><td>Configuration</td><td>Configuration files.</td><td>The application may require a single configuration file only.</td></tr><tr><td>Executables</td><td>Scripts and (binary) executables.</td><td>Tools may be provided to the user.</td></tr><tr><td>Data</td><td>Persistent data files.</td><td>E.g. databases; it may not be possible to recreate these files from scratch.</td></tr><tr><td>Cache</td><td>Volatile data files.</td><td>E.g. files downloaded from the &ldquo;Internet&rdquo;; can be downloaded again if deleted.</td></tr><tr><td>Logs</td><td>Application Log Files</td><td></td></tr><tr><td>State</td><td>Application State.</td><td>E.g. views, layout, open files, undo history, recent documents, actions history etc.</td></tr><tr><td>Runtime</td><td>UNIX Sockets</td><td>May not be applicable to all platforms.</td></tr><tr><td>Temporary Files</td><td>Volatile files.</td><td>Directory contents may not survive sessions.</td></tr></tbody></table><p>However, not all applications will actually use or require all of these directories.</p><h2 id=mapping-to-the-user-filesystem>Mapping to the (User) Filesystem</h2><p>This section describes strategies to implement the defined base directories.</p><h3 id=application-identity>Application Identity</h3><p>All platforms need to identify an application in one way or the other. This identification can then be used to derive
directory names.</p><p><em>Linux</em> and/or <em>Microsoft Windows</em> may use the plain application name, <em>macOS</em> requires a more sophisticated
<em>Bundle ID</em>. This bundle ID consists out of the</p><ul><li>reversed domain, e.g. <code>com.github.bvfnbk</code> and the</li><li>name of the application, e.g. <code>ApplicationName</code></li></ul><p>which is concatenated to</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>com.github.bvfnbk.ApplicationName
</span></span></code></pre></div><p>and is used for application-specific directory names and for configuration files (e.g.
<code>com.github.bvfnbk.ApplicationName.plist</code>)</p><h3 id=single-directory-for-all>Single Directory for All</h3><p>The idea is to put all application directories into a single directory. This actually is a reasonable strategy on all
platforms lacking a specification of standard user directories or for simplification purposes.</p><p><strong>Please note:</strong> In the most generic use case, this may be any directory in the users home directory. This directory
is usually <em>hidden</em> on linux platforms, e.g.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>~/.<span style=color:#e6db74>${</span>applicationName<span style=color:#e6db74>}</span>/
</span></span></code></pre></div><p>For linux, the following table defines <em>one</em> possible strategy to map the application directories</p><table><thead><tr><th>Application Directory</th><th>Path</th><th>Comment</th></tr></thead><tbody><tr><td>Configuration</td><td><code>~/.${applicationName}rc</code></td><td>A single configuration file may be put as a hidden file directly into the home directory.</td></tr><tr><td></td><td><code>~/.${applicationName}/etc/</code></td><td>Multiple files can be put into a dedicated directory into the local application directory.</td></tr><tr><td>Executables</td><td><code>~/.${applicationName}/bin/</code></td><td>An application may or may not have extra executable files besides the application itself.</td></tr><tr><td>Data</td><td><code>~/.${applicationName}/var/</code></td><td></td></tr><tr><td>Cache</td><td><code>~/.${applicationName}/var/cache/</code></td><td></td></tr><tr><td>Logs</td><td><code>~/.${applicationName}/var/log/</code></td><td></td></tr><tr><td>State</td><td><code>~/.${applicationName}/var/state/</code></td><td></td></tr><tr><td>Runtime</td><td><code>~/.${applicationName}/var/run/</code></td><td></td></tr><tr><td>Temporary Files</td><td><code>~/.${applicationName}/var/tmp/</code></td><td></td></tr></tbody></table><p>This is a simple example naming strategy, loosely following the filesystem hierarchy standard (very loosely&mldr;). The
actual directory names like <code>etc/</code> etc. should be configurable.</p><h3 id=windows>Windows</h3><p>There is no specific directory structure defined for user applications. It may use the
<a href=#single-directory-for-all>Single Directory for All</a> strategy as previously defined. However, there are recommendations
on where to put this kind of directory.</p><p><em>Windows</em> defines the <code>AppData</code> directory for each user to contain the user application data. This directory can be
found at</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>C:<span style=color:#ae81ff>\U</span>sers<span style=color:#ae81ff>\$</span><span style=color:#f92672>{</span>username<span style=color:#f92672>}</span><span style=color:#ae81ff>\A</span>ppData<span style=color:#ae81ff>\
</span></span></span></code></pre></div><p>By default, there are the following directories to be found here:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>C:<span style=color:#ae81ff>\U</span>sers<span style=color:#ae81ff>\$</span><span style=color:#f92672>{</span>username<span style=color:#f92672>}</span><span style=color:#ae81ff>\A</span>ppData<span style=color:#ae81ff>\L</span>ocal
</span></span><span style=display:flex><span>C:<span style=color:#ae81ff>\U</span>sers<span style=color:#ae81ff>\$</span><span style=color:#f92672>{</span>username<span style=color:#f92672>}</span><span style=color:#ae81ff>\A</span>ppData<span style=color:#ae81ff>\L</span>ocalLow
</span></span><span style=display:flex><span>C:<span style=color:#ae81ff>\U</span>sers<span style=color:#ae81ff>\$</span><span style=color:#f92672>{</span>username<span style=color:#f92672>}</span><span style=color:#ae81ff>\A</span>ppData<span style=color:#ae81ff>\R</span>oaming
</span></span></code></pre></div><p><strong>Please note:</strong></p><ul><li>The <code>Roaming</code> application data directory is for roaming user profiles, i.e. users whose PCs are connected to a domain
and their profiles are loaded from the domain controller. This way, important settings <em>could</em> be shared across different
computers if all are part of the same domain.</li><li><code>LocalLow</code> is for access-restricted applications, e.g. for a web browser in protected/safe mode which are not able to
access the <code>Local</code> directory.</li><li><code>Local</code> is the place to put application specific files by default.</li></ul><h3 id=linux-xdg>Linux (XDG)</h3><p>The XDG base directory specification defines the following environment variables and directories (amongst others):</p><table><thead><tr><th>Environment Variable</th><th>Default</th><th>User-specific…</th><th>Comment</th></tr></thead><tbody><tr><td><code>XDG_DATA_HOME</code></td><td><code>~/.local/share/</code></td><td>…data files.</td><td></td></tr><tr><td><code>XDG_CONFIG_HOME</code></td><td><code>~/.config/</code></td><td>…configuration files.</td><td></td></tr><tr><td><code>XDG_STATE_HOME</code></td><td><code>~/.local/state/</code></td><td>…state data.</td><td>Log files and application state.</td></tr><tr><td></td><td><code>~/.local/bin/</code></td><td>…executable files.</td><td></td></tr><tr><td><code>XDG_CACHE_HOME</code></td><td><code>~/.cache/</code></td><td>…cached data files.</td><td></td></tr></tbody></table><p><strong>Please note:</strong> There is a <code>XDG_RUNTIME_DIR</code> which is meant for runtime and other files. The specification puts certain
requirements onto this directory, e.g. it must be created when the user logs in and removed when the user logs out etc.
which qualifies it for highly volatile files only.</p><p>The defined application directories can therefore be mapped to</p><table><thead><tr><th>Application Directory</th><th>Path</th><th>Comment</th></tr></thead><tbody><tr><td>Configuration</td><td><code>~/.config/${applicationName}/</code></td><td>Any number of configuration files are supposed to end in this directory.</td></tr><tr><td>Executables</td><td><code>~/.local/bin/</code></td><td>This directory should already be in the <code>PATH</code> and is actually shared with other applications.</td></tr><tr><td>Data</td><td><code>~/.local/share/${applicationName}/</code></td><td></td></tr><tr><td>Cache</td><td><code>~/.cache/${applicationName}/</code></td><td></td></tr><tr><td>Logs</td><td><code>~/.local/state/${applicationName}/</code></td><td>Eventually create a <code>log</code> directory in this directory.</td></tr><tr><td>State</td><td><code>~/.local/state/${applicationName}/</code></td><td></td></tr><tr><td>Runtime</td><td><code>$XDG_RUNTIME_DIR/.${applicationName}/</code></td><td></td></tr><tr><td>Temporary Files</td><td></td><td>Use system directories, e.g. <code>/tmp</code> or <code>/var/tmp</code>.</td></tr></tbody></table><h3 id=macos>macOS</h3><p>The most important directories for an application are</p><table><thead><tr><th>Path</th><th>Contents</th><th>Comment</th></tr></thead><tbody><tr><td><code>~/Applications/</code></td><td>User-specific applications.</td><td>This will be the place where a desktop application may be stored.</td></tr><tr><td><code>~/Library/</code></td><td>User-specific application files.</td><td>This directory contains all of the application-specific directories.</td></tr></tbody></table><p>(Left out, but mentioned here for the sake of completeness: <code>Desktop/</code>, <code>Documents/</code>, <code>Downloads/</code>, <code>Movies/</code>, <code>Music/</code>,
<code>Pictures/</code>, <code>Public/</code>, <code>Sites/</code>)</p><p>The <code>Library/</code> directory is the main directory of interest, containing</p><table><thead><tr><th>Path</th><th>Contents</th><th>Comment</th></tr></thead><tbody><tr><td><code>Application Support/</code></td><td>Application data files.</td><td>Included in backup.</td></tr><tr><td><code>Caches/</code></td><td>Application-specific &ldquo;support files&rdquo;.</td><td>Not included in backup; the system may remove this directory if required.</td></tr><tr><td><code>Preferences/</code></td><td>Application-specific configuration files.</td><td>Included in backup.</td></tr><tr><td><code>Logs/</code></td><td>Log files for console and specific services.</td><td>May be viewed using the <em>Console</em> app.</td></tr></tbody></table><p><strong>Please note:</strong> The <em>Apple File System Programming Guide</em> actually discourages the direct creation of configuration
files in the <code>Preferences/</code> directory.</p><p>The proposed application directories can therefore be mapped to</p><table><thead><tr><th>Application Directory</th><th>Path</th><th>Comment</th></tr></thead><tbody><tr><td>Configuration</td><td><code>~/Library/Preferences/</code></td><td>A single configuration file may be put into the directory but named according to the bundle.</td></tr><tr><td></td><td><code>~/Library/Preferences/${bundleId}/</code></td><td>Multiple files can be put into a dedicated directory.</td></tr><tr><td>Executables</td><td><code>~/Library/Application Support/${bundleId}/bin/</code></td><td>Apple does explicitly define a directory for executables.</td></tr><tr><td>Data</td><td><code>~/Library/Application Support/${bundleId}/</code></td><td></td></tr><tr><td>Cache</td><td><code>~/Library/Caches/${bundleId}/</code></td><td></td></tr><tr><td>Logs</td><td><code>~/Library/Logs/${bundleId}/</code></td><td></td></tr><tr><td>State</td><td></td><td>There is no equivalent directory defined in the specification. Create one in the <em>Data</em> directory.</td></tr><tr><td>Runtime</td><td></td><td>There is no equivalent directory defined in the specification. Create one in the <em>Data</em> directory.</td></tr><tr><td>Temporary Files</td><td></td><td><code>$TMPDIR</code>, <code>/private/tmp</code>, <code>/private/var/tmp</code> etc.</td></tr></tbody></table><p>There is no &ldquo;true&rdquo; directory for temporary files. One has to classify the type of (temporary) file and eventually put
the files into the <em>Cache</em> directory. The <code>$TMPDIR</code> points to a <em>generated</em> directory, e.g.
<code>/var/folders/cr/1zh7581j0vxfjqvpskdv1kvc0000gn/T/</code> which may be wiped after restart (please note that this directory
is used by the JVM as well; cf. the system property <code>java.io.tmpdir</code>).</p><h2 id=outlook>Outlook</h2><p>An application developer may require more control over the concrete locations of each application directory, e.g. the
developer may want to move <em>some</em> directories to a network share but leave others at their local counterparts.</p><p><strong>Please note:</strong> On <em>Microsoft Windows</em> it may be useful to separate domain-specific (generic) configuration from
host-specific configuration and store those files in the <code>AppData/Roaming</code> and/or <code>AppData/Local</code> directory. This is
especially true for files which may be too large to be stored on a network drive (e.g. caches etc.).</p><h2 id=resources>Resources</h2><ul><li>Linux<ul><li>Filesystem Hierarchy Standard <a href=https://wiki.linuxfoundation.org/lsb/fhs>https://wiki.linuxfoundation.org/lsb/fhs</a></li><li>XDG Base Directory Specification <a href=https://specifications.freedesktop.org/basedir-spec/basedir-spec-latest.html>https://specifications.freedesktop.org/basedir-spec/basedir-spec-latest.html</a></li></ul></li><li>Apple Filesystem Programming Guide<ul><li><a href=https://developer.apple.com/library/archive/documentation/FileManagement/Conceptual/FileSystemProgrammingGuide/FileSystemOverview/FileSystemOverview.html>https://developer.apple.com/library/archive/documentation/FileManagement/Conceptual/FileSystemProgrammingGuide/FileSystemOverview/FileSystemOverview.html</a></li><li><a href=https://developer.apple.com/library/archive/documentation/FileManagement/Conceptual/FileSystemProgrammingGuide/MacOSXDirectories/MacOSXDirectories.html>https://developer.apple.com/library/archive/documentation/FileManagement/Conceptual/FileSystemProgrammingGuide/MacOSXDirectories/MacOSXDirectories.html</a></li></ul></li></ul><ul><li>Microsoft Windows User Directory Structure (URL???)</li></ul></div></article></main></body></html>