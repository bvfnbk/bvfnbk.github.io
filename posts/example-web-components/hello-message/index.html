<!doctype html><html lang=en-us><head><title>&lt;hello-message> Component // Notes of bvfnbk</title><link rel="shortcut icon" href=/favicon.ico><meta charset=utf-8><meta name=generator content="Hugo 0.83.0"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=author content="bvfnbk"><meta name=description content><link rel=stylesheet href=https://bvfnbk.github.io/css/main.min.88e7083eff65effb7485b6e6f38d10afbec25093a6fac42d734ce9024d3defbd.css><meta name=twitter:card content="summary"><meta name=twitter:title content="<hello-message> Component"><meta name=twitter:description content="Vanilla web components are custom components written in plain JavaScript - not using any of the usual component frameworks like React, Vue or Angular and alike involved.
The following source code snippet defines a <hello-message /> component, written in plain JavaScript. It supports a single attribute named name:
Create a file src/public/js/HelloWorld.js with the following contents:
/* * Define template: * * - create `template` element * - set contents (`innerHTML`) - including `<style>` block."><meta property="og:title" content="<hello-message> Component"><meta property="og:description" content="Vanilla web components are custom components written in plain JavaScript - not using any of the usual component frameworks like React, Vue or Angular and alike involved.
The following source code snippet defines a <hello-message /> component, written in plain JavaScript. It supports a single attribute named name:
Create a file src/public/js/HelloWorld.js with the following contents:
/* * Define template: * * - create `template` element * - set contents (`innerHTML`) - including `<style>` block."><meta property="og:type" content="article"><meta property="og:url" content="https://bvfnbk.github.io/posts/example-web-components/hello-message/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2022-08-22T16:13:21+02:00"><meta property="article:modified_time" content="2022-08-22T16:13:21+02:00"></head><body><header class=app-header><a href=https://bvfnbk.github.io/><img class=app-header-avatar src=/avatar.png alt=bvfnbk></a><h1>Notes of bvfnbk</h1><nav class=app-header-menu><a class=app-header-menu-item href=/>Home</a>
/
<a class=app-header-menu-item href=/tags/>Tags</a>
/
<a class=app-header-menu-item href=/about/>About</a></nav><p>Software development and other stuff.</p><div class=app-header-social><a href=https://github.com/bvfnbk target=_blank rel="noreferrer noopener"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-github"><title>https://github.com/bvfnbk</title><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37.0 00-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44.0 0020 4.77 5.07 5.07.0 0019.91 1S18.73.65 16 2.48a13.38 13.38.0 00-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07.0 005 4.77 5.44 5.44.0 003.5 8.55c0 5.42 3.3 6.61 6.44 7A3.37 3.37.0 009 18.13V22"/></svg></a></div></header><main class=app-container><article class=post><header class=post-header><h1 class=post-title>&lt;hello-message> Component</h1><div class=post-meta><div><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-calendar"><title>calendar</title><rect x="3" y="4" width="18" height="18" rx="2" ry="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/></svg>Aug 22, 2022</div><div><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-clock"><title>clock</title><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg>2 min read</div><div><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tag"><title>tag</title><path d="M20.59 13.41l-7.17 7.17a2 2 0 01-2.83.0L2 12V2h10l8.59 8.59a2 2 0 010 2.82z"/><line x1="7" y1="7" x2="7.01" y2="7"/></svg><a class=tag href=https://bvfnbk.github.io/tags/web/>web</a>
<a class=tag href=https://bvfnbk.github.io/tags/html/>html</a>
<a class=tag href=https://bvfnbk.github.io/tags/javascript/>javascript</a>
<a class=tag href=https://bvfnbk.github.io/tags/web-component/>web-component</a></div></div></header><div class=post-content><p><em>Vanilla web components</em> are custom components written in plain JavaScript - not using any of the usual component
frameworks like <em>React</em>, <em>Vue</em> or <em>Angular</em> and alike involved.</p><p>The following source code snippet defines a <code>&lt;hello-message /></code> component, written in plain <em>JavaScript</em>. It
supports a single attribute named <code>name</code>:</p><p>Create a file <code>src/public/js/HelloWorld.js</code> with the following contents:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=color:#75715e>/*
</span><span style=color:#75715e> * Define template:
</span><span style=color:#75715e> * 
</span><span style=color:#75715e> *   - create `template` element
</span><span style=color:#75715e> *   - set contents (`innerHTML`) - including `&lt;style&gt;` block.
</span><span style=color:#75715e> */</span>
<span style=color:#66d9ef>const</span> <span style=color:#a6e22e>template</span> <span style=color:#f92672>=</span> document.<span style=color:#a6e22e>createElement</span>(<span style=color:#e6db74>&#39;template&#39;</span>);
<span style=color:#a6e22e>template</span>.<span style=color:#a6e22e>innerHTML</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>`
</span><span style=color:#e6db74>&lt;style&gt;
</span><span style=color:#e6db74>span#wrapper {
</span><span style=color:#e6db74>  font-weight: bolder;
</span><span style=color:#e6db74>  color: brown;
</span><span style=color:#e6db74>}
</span><span style=color:#e6db74>&lt;/style&gt;
</span><span style=color:#e6db74>&lt;span id=&#34;wrapper&#34;&gt;Hello World!&lt;/span&gt;
</span><span style=color:#e6db74>`</span>;

<span style=color:#75715e>/*
</span><span style=color:#75715e> * Define element
</span><span style=color:#75715e> * 
</span><span style=color:#75715e> *   - ES6 class
</span><span style=color:#75715e> *   - Extend HTMLElement (others are possible)
</span><span style=color:#75715e> */</span>
<span style=color:#66d9ef>class</span> <span style=color:#a6e22e>HelloMessage</span> <span style=color:#66d9ef>extends</span> <span style=color:#a6e22e>HTMLElement</span> {
  <span style=color:#75715e>// Define property names for which change events should be intercepted: 
</span><span style=color:#75715e></span>  <span style=color:#66d9ef>static</span> <span style=color:#a6e22e>get</span> <span style=color:#a6e22e>observedAttributes</span>() {
    <span style=color:#66d9ef>return</span> [<span style=color:#e6db74>&#39;name&#39;</span>];
  }

  <span style=color:#75715e>/*
</span><span style=color:#75715e>   * - attach shadow
</span><span style=color:#75715e>   * - clone template into shadow root
</span><span style=color:#75715e>   * - retrieve elements of interest &amp; define fields
</span><span style=color:#75715e>   */</span>
  <span style=color:#a6e22e>constructor</span>() {
    <span style=color:#66d9ef>super</span>();
    <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>attachShadow</span>({<span style=color:#a6e22e>mode</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;open&#39;</span>});
    <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>shadowRoot</span>.<span style=color:#a6e22e>appendChild</span>(<span style=color:#a6e22e>template</span>.<span style=color:#a6e22e>content</span>.<span style=color:#a6e22e>cloneNode</span>(<span style=color:#66d9ef>true</span>));
    <span style=color:#66d9ef>this</span>.<span style=color:#ae81ff>_</span><span style=color:#a6e22e>wrapper</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>shadowRoot</span>.<span style=color:#a6e22e>getElementById</span>(<span style=color:#e6db74>&#39;wrapper&#39;</span>);
  }
  
  <span style=color:#75715e>/*
</span><span style=color:#75715e>   * Handle _all_ property change events for which this element is registered for.
</span><span style=color:#75715e>   */</span>
  <span style=color:#a6e22e>attributeChangedCallback</span>(<span style=color:#a6e22e>attributeName</span>, <span style=color:#ae81ff>_</span><span style=color:#a6e22e>oldValue</span>, <span style=color:#a6e22e>newValue</span>) {
    <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>attributeName</span> <span style=color:#f92672>===</span> <span style=color:#e6db74>&#39;name&#39;</span>) {
      <span style=color:#66d9ef>this</span>.<span style=color:#ae81ff>_</span><span style=color:#a6e22e>wrapper</span>.<span style=color:#a6e22e>innerText</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>`Hello </span><span style=color:#e6db74>${</span><span style=color:#a6e22e>newValue</span> <span style=color:#f92672>?</span> <span style=color:#a6e22e>newValue</span> <span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;World&#39;</span><span style=color:#e6db74>}</span><span style=color:#e6db74>`</span>;
    }
  }
}

<span style=color:#75715e>/*
</span><span style=color:#75715e> * Register element.
</span><span style=color:#75715e> * 
</span><span style=color:#75715e> * Note: the element class is not required to be exported.
</span><span style=color:#75715e> */</span>
<span style=color:#a6e22e>customElements</span>.<span style=color:#a6e22e>define</span>(<span style=color:#e6db74>&#39;hello-message&#39;</span>, <span style=color:#a6e22e>HelloMessage</span>);
</code></pre></div><p><strong>Please note:</strong></p><ul><li>The <a href=https://developer.mozilla.org/en-US/docs/Web/Web_Components/Using_custom_elements>Mozilla Developer Network</a>
mentions that all tasks related to the set-up of the component is supposed to take place in the <code>connectedCallback</code>
(cf. <a href=https://bvfnbk.github.io/posts/example-web-components/overview/#lifecycle-methods title="Lifecycle Methods">Lifecycle Methods</a>)</li><li>The suggested implementation follows the
<a href=https://html.spec.whatwg.org/multipage/custom-elements.html#custom-element-conformance>specification</a> for custom
elements which actually is more forgiving.</li><li>Long-running (e.g. <em>asynchronous</em> <code>fetch</code> requests) should be handled in the <code>connectedCallback()</code> though.</li></ul><p>Create the HTML page <code>src/public/index.html</code> like this:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html><span style=color:#75715e>&lt;!doctype html&gt;</span>
&lt;<span style=color:#f92672>html</span> <span style=color:#a6e22e>lang</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;en&#34;</span>&gt;
&lt;<span style=color:#f92672>head</span>&gt;
  &lt;<span style=color:#f92672>title</span>&gt;Example / Web Components / Greeter&lt;/<span style=color:#f92672>title</span>&gt;
  &lt;<span style=color:#f92672>script</span> <span style=color:#a6e22e>src</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;js/HelloMessage.js&#34;</span>&gt;&lt;/<span style=color:#f92672>script</span>&gt;
&lt;/<span style=color:#f92672>head</span>&gt;
&lt;<span style=color:#f92672>body</span>&gt;
&lt;<span style=color:#f92672>label</span> <span style=color:#a6e22e>for</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;someInput&#34;</span>&gt;Message:&lt;/<span style=color:#f92672>label</span>&gt;
&lt;<span style=color:#f92672>input</span> <span style=color:#a6e22e>id</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;someInput&#34;</span> <span style=color:#a6e22e>type</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;text&#34;</span>/&gt; &lt;<span style=color:#f92672>br</span>/&gt;
&lt;<span style=color:#f92672>hello-message</span> <span style=color:#a6e22e>id</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;greeter&#34;</span> <span style=color:#a6e22e>name</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;Friend&#34;</span>&gt;&lt;/<span style=color:#f92672>hello-message</span>&gt;
&lt;<span style=color:#f92672>script</span>&gt;
  <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>greeter</span> <span style=color:#f92672>=</span> document.<span style=color:#a6e22e>getElementById</span>(<span style=color:#e6db74>&#39;greeter&#39;</span>);
  <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>inputElement</span> <span style=color:#f92672>=</span> document.<span style=color:#a6e22e>getElementById</span>(<span style=color:#e6db74>&#39;someInput&#39;</span>);

  <span style=color:#a6e22e>inputElement</span>.<span style=color:#a6e22e>addEventListener</span>(<span style=color:#e6db74>&#39;input&#39;</span>, (<span style=color:#a6e22e>event</span>) =&gt; { <span style=color:#a6e22e>greeter</span>.<span style=color:#a6e22e>setAttribute</span>(<span style=color:#e6db74>&#39;name&#39;</span>, <span style=color:#a6e22e>event</span>.<span style=color:#a6e22e>target</span>.<span style=color:#a6e22e>value</span>); });
&lt;/<span style=color:#f92672>script</span>&gt;
&lt;/<span style=color:#f92672>body</span>&gt;
&lt;/<span style=color:#f92672>html</span>&gt;
</code></pre></div><h2 id=sources>Sources</h2><p>The sources to this web component (and more) can be found on GitHub:</p><p><a href=https://github.com/bvfnbk/example-web-component-greeter>https://github.com/bvfnbk/example-web-component-greeter</a></p></div><div class=post-footer></div></article></main></body></html>